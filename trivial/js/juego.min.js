document.addEventListener("DOMContentLoaded",function(){var l=document.getElementsByTagName("button");var h=document.getElementById("titulo");var m=document.getElementById("ronda");
var r=document.getElementsByClassName("puntos");var j=document.getElementById("objeto");var q=/^(http|https)\:\/\/[a-z0-9\.-]+/gi;var d="";var b=1;var n=1;
var s;var c;for(var o=0;o<l.length;o++){l[o].addEventListener("click",f);}g();function g(){var u=true;do{c=Math.floor(Math.random()*categorias.length);
if(arrayResult[c].length!=0){u=false;}}while(u);s=Math.floor(Math.random()*arrayResult[c].length);m.innerHTML="ronda "+b+" </br> jugador "+n;h.innerHTML=arrayResult[c][s]["pregunta"];
a(arrayResult[c][s]["Objeto"],arrayResult[c][s]["tipoObjeto"]);for(var t=0;t<nrespuestas;t++){l[t].innerHTML=arrayResult[c][s]["Respuesta "+(t+1)];l[t].setAttribute("value",(t+1));
}l[l.length-1].innerHTML=arrayResult[c][s]["Correcta"];l[l.length-1].setAttribute("value",arrayResult[c][s]["Correcta"]);d=arrayResult[c][s]["Correcta"];
arrayResult[c].splice(s,1);p(l);}function a(t,i){switch(i){case"Imagen":j.innerHTML="<img src='"+rutas[0]+t+'\' alt="foto" width="100px" height="100px">';
break;case"Audio":j.innerHTML="<audio controls><source src="+rutas[1]+t+"></audio>";break;case"VÃ­deo":if(t.match(q)){t=t.replace("watch?v=","v/");j.innerHTML='<iframe width="560" height="315" src='+t+' frameborder="0" allowfullscreen></iframe>';
}else{j.innerHTML="<video src="+rutas[2]+t+' controls width="400px" height="200px"></video>';}break;default:j.innerHTML="";break;}}function p(i){var t=Math.floor(Math.random()*nrespuestas);
var u;if(t<nrespuestas-1){u=i[t].innerHTML;i[t].innerHTML=i[i.length-1].innerHTML;i[t].setAttribute("value",i[i.length-1].getAttribute("value"));i[i.length-1].innerHTML=u;
i[i.length-1].setAttribute("value",u);}}function f(){preguntasTotales--;if(this.value==d){for(var t=0;t<jugadores;t++){if((t+1)==n){r[t].innerHTML=parseInt(r[t].innerHTML)+1;
}}}if(preguntasTotales>0){if(n==jugadores){n=1;b++;}else{n++;}g();}else{e();}}function e(){for(var t=0;t<l.length;t++){l[t].removeEventListener("click",f);
}document.getElementById("preguntas").innerHTML=k();}function k(){var w="";var v="";var u="Ha ganado el jugador";for(var t=0;t<jugadores;t++){if(r[t].innerHTML>v){w=(t+1);
v=r[t].innerHTML;}else{if(r[t].innerHTML==v){w+=" "+(t+1);}}}if(w.length>1){u="Han ganado los jugadores";}return(u+" "+w+" con un total de "+v+" puntos");
}});